(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/shopro-share/shopro-share"],{"002b":function(e,t,o){"use strict";o.r(t);var a=o("f3a0"),n=o("a46a");for(var r in n)["default"].indexOf(r)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(r);o("1303");var i=o("828b"),s=Object(i["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=s.exports},1303:function(e,t,o){"use strict";var a=o("4506"),n=o.n(a);n.a},4506:function(e,t,o){},"827d":function(e,t,o){"use strict";(function(e){var a=o("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o("7eb4")),r=a(o("ee10")),i=a(o("7ca3")),s=o("8f59"),c=a(o("a25c"));function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){(0,i.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var h={name:"shoproShare",components:{},data:function(){return{showShareGuide:!1,showPoster:!1,platform:this.$platform.get(),posterImage:"",canvasParams:{}}},props:{posterType:{type:String,default:""},posterInfo:{type:Object,default:function(){}},value:{}},computed:d(d({},(0,s.mapGetters)(["initShare","userInfo","isLogin","shareInfo"])),{},{showShare:{get:function(){return this.value},set:function(t){this.showPoster||(t?e.hideTabBar():e.showTabBar()),this.$emit("input",t)}}}),created:function(){var t=this;e.$on("ON_WX_SHARE",(function(){t.showShare=!1}))},methods:{onClosePoster:function(){this.showPoster=!1,e.showTabBar()},onSuccess:function(e){this.posterImage=e},onPoster:function(){this.posterImage="",e.hideTabBar(),this.$store.getters.isLogin?(this.canvasParams=this.getPosterFormatter(),this.showPoster=!0):this.$store.dispatch("showAuthModal","accountLogin"),this.showShare=!1},shareFriend:function(){},saveImage:function(){var t=this;return(0,r.default)(n.default.mark((function o(){var a,r;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=t,!["wxOfficialAccount","H5"].includes(t.platform)){o.next=4;break}return t.$u.toast("长按图片保存"),o.abrupt("return",!1);case 4:return o.next=6,new c.default("writePhotosAlbum").check();case 6:r=o.sent,r&&e.saveImageToPhotosAlbum({filePath:a.posterImage,success:function(e){t.$u.toast("保存成功"),t.showPoster=!1},fail:function(e){console.log("图片保存失败:",e),t.$u.toast("保存失败")}});case 8:case"end":return o.stop()}}),o)})))()},copySharePath:function(){var t=this;e.setClipboardData({data:t.shareInfo.copyLink,success:function(e){t.$u.toast("已复制到剪切板"),t.showShare=!1}})},getPosterFormatter:function(){var e={};switch(this.posterType){case"user":e={backgroundImage:this.initShare.user_poster_bg,drawArray:[{name:"用户昵称",type:"text",text:this.userInfo.nickname,isBgCenter:!0,size:28,dy:250,color:"#333",textAlign:"middle",textBaseLine:"middle"},{name:"avatar",type:"image",url:this.userInfo.avatar,alpha:1,isBgCenter:!0,dy:95,dWidth:120,dHeight:120,circleSet:{}},{name:"wxCode",type:"image",url:"".concat(this.$API_URL,"wechat/wxacode?scene=").concat(this.shareInfo.query),alpha:1,dy:560,isBgCenter:!0,dWidth:180,dHeight:180}]};break;case"goods":e={backgroundImage:this.initShare.goods_poster_bg,drawArray:[{name:"avatar",type:"image",url:this.userInfo.avatar,alpha:1,dy:40,dx:38,dWidth:80,dHeight:80,circleSet:{}},{type:"text",text:this.userInfo.nickname,size:28,color:"#333",alpha:1,textAlign:"middle",textBaseline:"bottom",dx:140,dy:40},{type:"text",text:"推荐一个好物给你,请查收！",size:26,color:"#333",alpha:1,textAlign:"middle",textBaseline:"middle",dx:140,dy:80},{name:"goodsImage",type:"image",url:this.posterInfo.image,alpha:1,isBgCenter:!0,dy:140,dWidth:620,dHeight:620,roundRectSet:{r:20}},{type:"text",text:this.posterInfo.title,size:28,color:"#333",alpha:1,textAlign:"left",textBaseline:"middle",fontWeight:"bold",lineFeed:{maxWidth:620,lineHeight:40,lineNum:2},dx:36,dy:780},{type:"text",text:"￥".concat(this.posterInfo.price),size:38,color:"#E1212B",alpha:1,textAlign:"left",textBaseline:"middle",fontWeight:"bold",fontFamily:"OPPOSANS",dx:30,dy:860},{type:"text",text:"￥".concat(this.posterInfo.original_price),size:28,color:"#999999",alpha:1,textAlign:"left",textBaseline:"top",lineThrough:{style:"#999999"},dx:400,dy:860},{name:"wxCode",type:"image",url:"".concat(this.$API_URL,"wechat/wxacode?scene=").concat(this.shareInfo.query),alpha:1,dx:522,dy:911,dWidth:110,dHeight:110}]};break;case"groupon":e={backgroundImage:this.initShare.groupon_poster_bg,drawArray:[{name:"avatar",type:"image",url:this.userInfo.avatar,alpha:1,dy:40,dx:38,dWidth:80,dHeight:80,circleSet:{}},{type:"text",text:this.userInfo.nickname,size:28,color:"#333",alpha:1,textAlign:"middle",textBaseline:"bottom",dx:140,dy:40},{type:"text",text:"发现一个好物，快来和我一起拼吧！",size:26,color:"#333",alpha:1,textAlign:"middle",textBaseline:"middle",dx:140,dy:80},{name:"goodsImage",type:"image",url:this.posterInfo.goods.image,alpha:1,isBgCenter:!0,dy:140,dWidth:620,dHeight:620,roundRectSet:{r:20}},{type:"text",text:this.posterInfo.goods.title,size:28,color:"#333",alpha:1,textAlign:"left",textBaseline:"middle",fontWeight:"bold",lineFeed:{maxWidth:620,lineHeight:40,lineNum:2},dx:36,dy:780},{type:"text",text:"拼团价：￥".concat(this.posterInfo.goods.groupon_price),size:32,color:"#E1212B",alpha:1,textAlign:"left",textBaseline:"middle",fontWeight:"bold",fontFamily:"OPPOSANS",dx:30,dy:860},{type:"text",text:"".concat(this.posterInfo.num,"人团"),size:24,color:"#fff",alpha:1,textAlign:"left",textBaseline:"top",dx:565,dy:863},{name:"wxCode",type:"image",url:"".concat(this.$API_URL,"wechat/wxacode?scene=").concat(this.shareInfo.query),alpha:1,dx:530,dy:930,dWidth:110,dHeight:110}]};break;default:console.log("%cerr:没有此类型海报数据","color:green;background:yellow");break}return e}}};t.default=h}).call(this,o("df3c")["default"])},a46a:function(e,t,o){"use strict";o.r(t);var a=o("827d"),n=o.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){o.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},f3a0:function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return a}));var a={shoproCanvas:function(){return Promise.all([o.e("common/vendor"),o.e("components/shopro-canvas/shopro-canvas")]).then(o.bind(null,"c457"))}},n=function(){var e=this,t=e.$createElement,o=(e._self._c,["wxOfficialAccount","H5"].includes(e.platform));e._isMounted||(e.e0=function(t){e.showPoster=!1},e.e1=function(t){e.showShare=!1},e.e2=function(t){e.showShare=!1},e.e3=function(t){e.showShareGuide=!1}),e.$mp.data=Object.assign({},{$root:{g0:o}})},r=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/shopro-share/shopro-share-create-component',
    {
        'components/shopro-share/shopro-share-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("002b"))
        })
    },
    [['components/shopro-share/shopro-share-create-component']]
]);
