(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/templeSubHome/templeSubHome"],{"161d":function(t,e,n){"use strict";var i=n("b288"),o=n.n(i);o.a},"45fd":function(t,e,n){"use strict";var i=n("d172"),o=n.n(i);o.a},"52e6":function(t,e,n){"use strict";n.r(e);var i=n("62c4"),o=n("d2c9");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("161d"),n("45fd");var c=n("828b"),s=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"77517706",null,!1,i["a"],void 0);e["default"]=s.exports},"62c4":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uSwiper:function(){return n.e("node-modules/uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"7ed7"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.templeData.tem_info.id?t.$common.disposeSrc(t.templeData.tem_info.logo):null),i=t.templeData.tem_info.id&&1==t.fo?t.__map(t.customs,(function(e,n){var i=t.__get_orig(e),o=t.$common.disposeSrc(e.icon);return{$orig:i,g1:o}})):null;t._isMounted||(t.e0=function(e){t.show=!t.show},t.e1=function(e){return t.$common.skip("/pages/hisOrder/hisOrder","to")}),t.$mp.data=Object.assign({},{$root:{g0:n,l0:i}})},a=[]},a420:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("7ea0");i(n("3240"));var o=i(n("52e6"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},ac90:function(t,e,n){"use strict";(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("af34")),a={components:{},data:function(){return{show:!1,popoverShow:!1,longX:0,longY:0,poverData:[{title:"复制"},{title:"转发"},{title:"回复"},{title:"删除"}],templeData:{banner:[],tem_info:{},columnList:[],articleList:[]},customs:[{buddhist_id:2,column_type:"to",icon:"/uploads/20221208/756290b662e3e107cb839612b9ec8cd5.png",id:22,status_text:"",title:"往生佛事"},{buddhist_id:8,column_type:"blessing",icon:"/uploads/20221208/523d2b366fc0ae7047e41cda2a14264f.png",id:21,status_text:"",title:"祈福佛事"}],page:1,size:10,getNext:!0,temple_id:"",templeMonth:{},activeMonth:"",fo:0,location_id:"",place_id:""}},onLoad:function(e){if(e.scene){console.log(e.scene),t.setStorageSync("scene",e.scene);var n=e.scene.split("_");console.log(n),this.temple_id=n[0],n[1]?(this.location_id=n[1],t.setStorageSync("location_id",this.location_id)):t.removeStorageSync("location_id"),n[2]?(this.place_id=n[2],t.setStorageSync("place_id",this.place_id)):t.removeStorageSync("place_id"),t.setStorageSync("temple_id",this.temple_id)}else this.temple_id=14,t.setStorageSync("temple_id",14);this.login()},onReachBottom:function(){this.getNext&&(this.page++,this.getArticleList(!0))},watch:{dataList:{handler:function(t){},deep:!0}},computed:{dataList:function(){var t=[],e=[];return this.templeData.articleList.map((function(n){n.date=n.create_date.split("-"),-1==t.indexOf(n.date[0])?(n.year=n.date[0],t.push(n.year)):n.year="";var i=n.date[1]+"-"+n.date[2];return-1==e.indexOf(i)?(n.monthDay=i,e.push(n.monthDay)):n.monthDay="",n}))}},methods:{login:function(){var e=this;t.login({provider:"weixin",success:function(n){e.$request({url:"onLogin",version:"/vx/",method:"GET",data:{code:n.code,temple_id:t.getStorageSync("temple_id")}}).then((function(n){t.setStorageSync("openid",n.openid),e.$request({url:"user/WxXxOpendiLogin",data:{openid:n.openid}}).then((function(n){t.setStorageSync("token",n.token),t.setStorageSync("mobile",n.mobile),e.getData(),e.getColumnList(),e.getArticleList(),e.getTempleMonth(),e.getSet()}))}))}})},getSet:function(){var t=this;this.$request({url:"getSet",version:"/v3/",method:"GET",data:{key:"fnSwitch"}}).then((function(e){t.fo=e.fnSwitch.fo,console.log(e)}))},getData:function(){var t=this;this.$request({url:"temple/tempInfo/".concat(this.temple_id),method:"GET"},!0).then((function(e){t.templeData.banner=e.banner.map((function(e){return e.video_image=t.$common.disposeSrc(e.video_image),e})),t.templeData.tem_info=e.tem_info}),(function(t){}))},getColumnList:function(){var t=this;this.$request({url:"temple/columnList/".concat(this.temple_id),method:"GET"}).then((function(e){t.templeData.columnList=e}))},getArticleList:function(t){var e=this;this.$request({url:"temple/articleList/".concat(this.temple_id),data:{page:this.page,size:this.size,date:this.activeMonth},method:"GET"},!0).then((function(n){e.templeData.articleList=t?[].concat((0,o.default)(e.templeData.articleList),(0,o.default)(n)):n,n.length<e.size&&(e.getNext=!1)}),(function(t){console.log(t)}))},getTempleMonth:function(){var t=this;this.$request({url:"temple/templeMonth/".concat(this.temple_id),method:"GET"}).then((function(e){t.templeMonth=e}))},clickMonthDay:function(t,e){var n=t+"-"+e;this.activeMonth==n?this.activeMonth="":this.activeMonth=n,this.page=1,this.getArticleList()},isActiveMonth:function(t,e){var n=!1,i=this.activeMonth.split("-");return i[0]==t&&i[1]==e&&(n=!0),n},tapPopup:function(t){console.log(t)},openDate:function(t){this.popoverShow=!this.popoverShow},openForm:function(e){"at"==e.column_type?t.navigateTo({url:"/pages/pray/components/at/index?column_id=".concat(e.id,"&column_type=").concat(e.column_type,"&buddhist_id=").concat(e.buddhist_id)}):"sign_up_js"==e.column_type?t.navigateTo({url:"/pages/templeHome/buddhist/home"}):"sign_up_yg"==e.column_type?t.navigateTo({url:"/pages/templeHome/buddhist/buddhistList?status=volunteer"}):t.navigateTo({url:"/pages/pray/pray?column_id=".concat(e.id,"&column_type=").concat(e.column_type,"&buddhist_id=").concat(e.buddhist_id)})},openDetail:function(e){t.navigateTo({url:"/pages/dynamic/dynamic?id="+e.id})}}};e.default=a}).call(this,n("df3c")["default"])},b288:function(t,e,n){},d172:function(t,e,n){},d2c9:function(t,e,n){"use strict";n.r(e);var i=n("ac90"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a}},[["a420","common/runtime","common/vendor"]]]);