(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/sign/index"],{1608:function(t,n,e){"use strict";var r=e("3560"),a=e.n(r);a.a},"2bf6":function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){}));var r=function(){var t=this,n=t.$createElement;t._self._c;t._isMounted||(t.e0=function(n){t.showSign=!1},t.e1=function(n){t.showSign=!1})},a=[]},3560:function(t,n,e){},"38bc":function(t,n,e){"use strict";(function(t,n){var r=e("47a9");e("7ea0");r(e("3240"));var a=r(e("d438"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(a.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},"768d":function(t,n,e){"use strict";var r=e("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(e("af34")),i=r(e("7ca3")),c=e("8f59");function o(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function s(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?o(Object(e),!0).forEach((function(n){(0,i.default)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var u={components:{},data:function(){return{days:[],cuntinueDays:0,score:"",cur_year:0,cur_month:0,cur_day:0,today:parseInt((new Date).getDate()),toMonth:parseInt((new Date).getMonth()+1),toYear:parseInt((new Date).getFullYear()),weeks_ch:["日","一","二","三","四","五","六"],isPresentMonth:!1,isSign:!1,showSign:!1}},computed:{},onLoad:function(){this.cur_year=this.toYear,this.cur_month=this.toMonth,this.cur_day=this.today,this.getSignList()},methods:s(s({},(0,c.mapActions)(["getUserInfo"])),{},{getSignList:function(){var t=this,n=t.cur_month<10?"0"+t.cur_month:t.cur_month,e="".concat(t.cur_year,"-").concat(n);t.$http("user.signList",{month:e}).then((function(n){if(1==n.code){var e=t.calculateEmptyGrids();t.cuntinueDays=0===t.cuntinueDays?n.data.cuntinue_days:t.cuntinueDays,t.days=[].concat((0,a.default)(e),(0,a.default)(n.data.days)),t.selSign()}}))},selSign:function(){var t="".concat(this.toYear,"-").concat(this.toMonth.toString().padStart(2,"0"),"-").concat(this.today.toString().padStart(2,"0")),n="".concat(this.cur_year,"-").concat(this.cur_month.toString().padStart(2,"0"),"-").concat(this.cur_day.toString().padStart(2,"0"));if(t===n){var e=this.days.find((function(n){return n.date===t}));this.isSign=e.is_sign}},calculateEmptyGrids:function(){var t=[],n=new Date(Date.UTC(this.cur_year,this.cur_month-1,1)).getDay();if(n>0)for(var e=0;e<n;e++){t.push({day:null,is_sign:!1})}return t},onSign:function(){var t=this,n=t.cur_month.toString().padStart(2,"0"),e="".concat(t.cur_year,"-").concat(n);t.$http("user.sign",{month:e},"签到中...").then((function(n){1==n.code&&(t.getSignList(),t.score=n.data.score,t.getUserInfo(),t.showSign=!0)}))},handleCalendar:function(t){var n=parseInt(this.cur_year),e=parseInt(this.cur_month),r=e,a=n;switch(t){case 0:this.isPresentMonth=!0,r=e-1,r<1&&(a=n-1,r=12),(a<this.toYear||a===this.toYear&&r<=this.toMonth)&&(this.isPresentMonth=!1);break;case 1:r=e+1,r>12&&(a=n+1,r=1),(a>this.toYear||a===this.toYear&&r>this.toMonth)&&(this.isPresentMonth=!0);break;default:break}this.cur_year=a,this.cur_month=r,this.getSignList()}})};n.default=u},c60c:function(t,n,e){"use strict";e.r(n);var r=e("768d"),a=e.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return r[t]}))}(i);n["default"]=a.a},d438:function(t,n,e){"use strict";e.r(n);var r=e("2bf6"),a=e("c60c");for(var i in a)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("1608");var c=e("828b"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);n["default"]=o.exports}},[["38bc","common/runtime","common/vendor"]]]);