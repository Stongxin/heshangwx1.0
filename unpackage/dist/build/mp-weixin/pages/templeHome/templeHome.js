(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/templeHome/templeHome"],{"107c":function(t,e,n){"use strict";var i=n("2dbb"),o=n.n(i);o.a},"16af":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uSwiper:function(){return n.e("node-modules/uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"7ed7"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.templeData.tem_info.id?t.$common.disposeSrc(t.templeData.tem_info.logo):null),i=t.templeData.tem_info.id&&1==t.fo?t.__map(t.templeData.columnList,(function(e,n){var i=t.__get_orig(e),o=t.$common.disposeSrc(e.icon);return{$orig:i,g1:o}})):null,o=t.templeData.tem_info.id&&1==t.fo?t.__map(t.templeMonth,(function(e,n){var i=t.__get_orig(e),o=t.__map(e,(function(e,i){var o=t.__get_orig(e),a=t.isActiveMonth(n,e);return{$orig:o,m0:a}}));return{$orig:i,l1:o}})):null,a=t.templeData.tem_info.id&&1==t.fo?t.__map(t.dataList,(function(e,n){var i=t.__get_orig(e),o=t.$common.disposeSrc(e.image),a=t.$common.disposeSrc(t.templeData.tem_info.logo);return{$orig:i,g2:o,g3:a}})):null;t._isMounted||(t.e0=function(e){t.show=!t.show},t.e1=function(e){return t.$common.skip("/pages/hisOrder/hisOrder","to")}),t.$mp.data=Object.assign({},{$root:{g0:n,l0:i,l2:o,l3:a}})},a=[]},"28dd":function(t,e,n){"use strict";var i=n("4609"),o=n.n(i);o.a},"2dbb":function(t,e,n){},4609:function(t,e,n){},"74f7":function(t,e,n){"use strict";(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("af34")),a={components:{},data:function(){return{show:!1,popoverShow:!1,longX:0,longY:0,poverData:[{title:"复制"},{title:"转发"},{title:"回复"},{title:"删除"}],templeData:{banner:[],tem_info:{},columnList:[],articleList:[]},page:1,size:10,getNext:!0,temple_id:"",templeMonth:{},activeMonth:"",fo:0}},onLoad:function(e){null!==e&&void 0!==e&&e.scene?(this.temple_id=e.scene,t.setStorageSync("temple_id",e.scene)):(this.temple_id=14,t.setStorageSync("temple_id",14)),t.getStorageSync("location_id")&&t.removeStorageSync("location_id"),t.getStorageSync("place_id")&&t.removeStorageSync("place_id"),this.login()},onReachBottom:function(){this.getNext&&(this.page++,this.getArticleList(!0))},watch:{dataList:{handler:function(t){},deep:!0}},computed:{dataList:function(){var t=[],e=[];return this.templeData.articleList.map((function(n){n.date=n.create_date.split("-"),-1==t.indexOf(n.date[0])?(n.year=n.date[0],t.push(n.year)):n.year="";var i=n.date[1]+"-"+n.date[2];return-1==e.indexOf(i)?(n.monthDay=i,e.push(n.monthDay)):n.monthDay="",n}))}},methods:{login:function(){var e=this;t.login({provider:"weixin",success:function(n){e.$request({url:"onLogin",version:"/vx/",method:"GET",data:{code:n.code,temple_id:t.getStorageSync("temple_id")}}).then((function(n){t.setStorageSync("openid",n.openid),e.$request({url:"user/WxXxOpendiLogin",data:{openid:n.openid}}).then((function(n){t.setStorageSync("token",n.token),t.setStorageSync("mobile",n.mobile),e.getData(),e.getColumnList(),e.getArticleList(),e.getTempleMonth(),e.getSet()}))}))}})},getSet:function(){var t=this;this.$request({url:"getSet",version:"/v3/",method:"GET",data:{key:"fnSwitch"}}).then((function(e){t.fo=e.fnSwitch.fo}))},getData:function(){var t=this;this.$request({url:"temple/tempInfo/".concat(this.temple_id),method:"GET"},!0).then((function(e){t.templeData.banner=e.banner.map((function(e){return e.video_image=t.$common.disposeSrc(e.video_image),e})),null==e.tem_info?t.templeData.tem_info={}:(t.templeData.tem_info=e.tem_info,t.templeData.tem_info.content=e.tem_info.content.replace(/\<img/gi,'<img style="max-width:100%;height:auto;display:block;"'))}),(function(t){}))},getColumnList:function(){var t=this;this.$request({url:"temple/columnList/".concat(this.temple_id),method:"GET"}).then((function(e){t.templeData.columnList=e}))},getArticleList:function(t){var e=this;this.$request({url:"temple/articleList/".concat(this.temple_id),data:{page:this.page,size:this.size,date:this.activeMonth},method:"GET"},!0).then((function(n){e.templeData.articleList=t?[].concat((0,o.default)(e.templeData.articleList),(0,o.default)(n)):n,n.length<e.size&&(e.getNext=!1)}),(function(t){console.log(t)}))},getTempleMonth:function(){var t=this;this.$request({url:"temple/templeMonth/".concat(this.temple_id),method:"GET"}).then((function(e){t.templeMonth=e}))},clickMonthDay:function(t,e){var n=t+"-"+e;this.activeMonth==n?this.activeMonth="":this.activeMonth=n,this.page=1,this.getArticleList()},isActiveMonth:function(t,e){var n=!1,i=this.activeMonth.split("-");return i[0]==t&&i[1]==e&&(n=!0),n},tapPopup:function(t){console.log(t)},openDate:function(t){this.popoverShow=!this.popoverShow},goBi:function(){},openForm:function(e){"at"==e.column_type?t.navigateTo({url:"/pages/pray/components/at/index?column_id=".concat(e.id,"&column_type=").concat(e.column_type,"&buddhist_id=").concat(e.buddhist_id)}):"sign_up_js"==e.column_type?t.navigateTo({url:"/pages/templeHome/buddhist/home"}):"sign_up_yg"==e.column_type?t.navigateTo({url:"/pages/templeHome/buddhist/buddhistList?status=volunteer"}):"shop"==e.column_type?t.switchTab({url:"/pages/index/index"}):t.navigateTo({url:"/pages/pray/pray?column_id=".concat(e.id,"&column_type=").concat(e.column_type,"&buddhist_id=").concat(e.buddhist_id)})},openDetail:function(e){t.navigateTo({url:"/pages/dynamic/dynamic?id="+e.id})}}};e.default=a}).call(this,n("df3c")["default"])},b226:function(t,e,n){"use strict";n.r(e);var i=n("16af"),o=n("e61a");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("28dd"),n("107c");var c=n("828b"),u=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"28b2563e",null,!1,i["a"],void 0);e["default"]=u.exports},e61a:function(t,e,n){"use strict";n.r(e);var i=n("74f7"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},ed70:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("7ea0");i(n("3240"));var o=i(n("b226"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["ed70","common/runtime","common/vendor"]]]);