(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/app/commission/index"],{"0929":function(t,e,o){"use strict";o.r(e);var s=o("e6f2"),n=o("b6d2");for(var i in n)["default"].indexOf(i)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(i);o("124e");var a=o("828b"),r=Object(a["a"])(n["default"],s["b"],s["c"],!1,null,"4d9946c8",null,!1,s["a"],void 0);e["default"]=r.exports},"124e":function(t,e,o){"use strict";var s=o("3396"),n=o.n(s);n.a},"1b80":function(t,e,o){"use strict";(function(t,e){var s=o("47a9");o("7ea0");s(o("3240"));var n=s(o("0929"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},3396:function(t,e,o){},"7b2f":function(t,e,o){"use strict";(function(t){var s=o("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(o("af34")),i=s(o("7ca3")),a=o("8f59");s(o("3ad2"));function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function m(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){(0,i.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var u={components:{},data:function(){return{showShare:!1,showMoney:!0,hasAuth:!0,commissionLv:null,commissionWallet:null,agentFrom:null,showLv:!0,commissionLog:[],loadStatus:"loadmore",currentPage:1,lastPage:1,logMap:{system:this.$IMG_URL+"/imgs/commission/commission_base_notice.png",admin:this.$IMG_URL+"/imgs/commission/commission_base_avatar.png"},showTerm:!1,showGoodsTerm:!1,showMoneyTerm:!1,goodsTermList:[],moneyTermNum:0,authNotice:{},menuList:[{img:this.$IMG_URL+"/imgs/commission/commission_icon1.png",title:"我的团队",path:"/pages/app/commission/team"},{img:this.$IMG_URL+"/imgs/commission/commission_icon2.png",title:"佣金明细",path:"/pages/app/commission/commission-log"},{img:this.$IMG_URL+"/imgs/commission/commission_icon3.png",title:"分销订单",path:"/pages/app/commission/order"},{img:this.$IMG_URL+"/imgs/commission/commission_icon4.png",title:"推广商品",path:"/pages/app/commission/goods"},{img:this.$IMG_URL+"/imgs/commission/commission_icon5.png",title:"我的资料",path:"/pages/app/commission/apply",isAgentFrom:!0},{img:this.$IMG_URL+"/imgs/commission/commission_icon6.png",title:"分销排行",path:"/pages/app/commission/rankings"},{img:this.$IMG_URL+"/imgs/commission/commission_icon7.png",title:"邀请海报",path:""},{img:this.$IMG_URL+"/imgs/commission/commission_icon8.png",title:"分享记录",path:"/pages/app/commission/share-log"}]}},computed:m(m({},(0,a.mapGetters)(["userInfo","agentInfo"])),{},{showAuthModal:{get:function(){return!!this.authNotice.title&&!this.hasAuth},set:function(t){return t}}}),onShow:function(){this.init()},onHide:function(){this.commissionLog=[],this.lastPage=1,this.currentPage=1},onLoad:function(){},onPullDownRefresh:function(){this.currentPage=1,this.lastPage=1,this.commissionLog=[],this.init()},methods:m(m({},(0,a.mapActions)(["getAgent","getUserInfo"])),{},{init:function(){return Promise.all([this.getStatus(),this.getUserInfo()]).then((function(){t.stopPullDownRefresh()}))},jump:function(t,e){t?this.$Router.push({path:t,query:e}):this.showShare=!0},getProgress:function(t,e){var o="";if(e+t>0){var s=t/e*100;o=s.toFixed(2)}else o="0";return Number(o)},getStatus:function(){var e=this;this.getAgent().then((function(o){var s;(t.stopPullDownRefresh(),1===o.code)&&(e.authStatus(o.data),e.commissionWallet=o.data.data,e.commissionLv=null===(s=o.data.data)||void 0===s?void 0:s.agent_level,e.showLv=o.data.upgrade_display,e.menuList.map((function(t){"我的资料"===t.title&&(t.isAgentFrom=!o.data.agent_form)})),e.commissionWallet&&e.getLog())}))},getLog:function(){var t=this;t.loadStatus="loading",this.$http("commission.log",{page:t.currentPage,per_page:5}).then((function(e){1===e.code&&(t.commissionLog=[].concat((0,n.default)(t.commissionLog),(0,n.default)(e.data.data)),t.lastPage=e.data.last_page,t.loadStatus=t.currentPage<e.data.last_page?"loadmore":"nomore")}))},loadMore:function(){this.currentPage<this.lastPage&&(this.currentPage+=1,this.getLog())},authStatus:function(t){switch(t.status){case"forbidden":this.hasAuth=!1,this.showTerm=!1,this.authNotice={img:this.$IMG_URL+"/imgs/commission/auth_stop.png",title:"抱歉！你的账户已被禁用",detail:t.msg,btnText:"联系客服",btnPath:"/pages/public/chat/index"};break;case"pending":this.hasAuth=!1,this.showTerm=!1,this.authNotice={img:this.$IMG_URL+"/imgs/commission/auth_stop.png",title:"正在审核中！",detail:t.msg,btnText:"知道了",btnPath:""};break;case"needinfo":this.hasAuth=!1,this.authNotice={img:this.$IMG_URL+"/imgs/commission/auth_perfect.png",title:"待完善信息",detail:t.msg,btnText:"去完善",btnPath:"/pages/app/commission/apply"};break;case"reject":this.hasAuth=!1,this.showTerm=!1,this.authNotice={img:this.$IMG_URL+"/imgs/commission/auth_reject.png",title:"申请驳回",detail:t.msg,btnText:"修改资料",btnPath:"/pages/app/commission/apply"};break;case"close":this.hasAuth=!1,this.showTerm=!1,this.authNotice={img:this.$IMG_URL+"/imgs/commission/auth_close.png",title:"分销中心已关闭",detail:t.msg,btnText:"我知道了",btnPath:""};break;case"freeze":this.hasAuth=!1,this.showTerm=!1,this.authNotice={img:this.$IMG_URL+"/imgs/commission/auth_freeze.png",title:"抱歉！你的账户已被冻结",detail:t.msg,btnText:"联系客服",btnPath:"/pages/public/chat/index",hideBtn:!0};break;case null:this.hasAuth=!1,this.showTerm=!0,t.become_agent&&("goods"===t.become_agent.type&&(this.showGoodsTerm=!0,this.getGoodsTermList(t.become_agent.value)),"consume"===t.become_agent.type&&(this.showMoneyTerm=!0,this.moneyTermNum=t.become_agent.value));break;default:this.hasAuth=!0,this.showTerm=!1}},getGoodsTermList:function(t){var e=this;e.$http("goods.lists",{goods_ids:t}).then((function(t){1===t.code&&(e.goodsTermList=t.data.data)}))},onAuthBtn:function(t){t?this.$Router.push({path:t}):this.$Router.back()}})};e.default=u}).call(this,o("df3c")["default"])},b6d2:function(t,e,o){"use strict";o.r(e);var s=o("7b2f"),n=o.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){o.d(e,t,(function(){return s[t]}))}(i);e["default"]=n.a},e6f2:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return s}));var s={shoproNavbar:function(){return o.e("components/shopro-navbar/shopro-navbar").then(o.bind(null,"9733"))},uLoadmore:function(){return o.e("node-modules/uview-ui/components/u-loadmore/u-loadmore").then(o.bind(null,"417c"))},shoproShare:function(){return Promise.all([o.e("common/vendor"),o.e("components/shopro-share/shopro-share")]).then(o.bind(null,"002b"))},uPopup:function(){return o.e("node-modules/uview-ui/components/u-popup/u-popup").then(o.bind(null,"e07b"))},uLineProgress:function(){return o.e("node-modules/uview-ui/components/u-line-progress/u-line-progress").then(o.bind(null,"a755"))}},n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.commissionLog,(function(e,o){var s=t.__get_orig(e),n=t.$u.timeFrom(e.createtime);return{$orig:s,g0:n}}))),s=t.commissionLog.length,n=t.showTerm&&t.showMoneyTerm&&t.userInfo.total_consume!=t.moneyTermNum?t.getProgress(t.userInfo.total_consume,t.moneyTermNum):null,i=t.showTerm&&t.showMoneyTerm?t.getProgress(t.userInfo.total_consume,t.moneyTermNum):null,a=t.showTerm&&t.showMoneyTerm&&t.userInfo.total_consume!=t.moneyTermNum?t.getProgress(t.userInfo.total_consume,t.moneyTermNum):null;t._isMounted||(t.e0=function(e){t.showMoney=!t.showMoney},t.e1=function(e,o){var s=arguments[arguments.length-1].currentTarget.dataset,n=s.eventParams||s["event-params"];o=n.item;return t.$u.toast(o.remark)},t.e2=function(e){return t.$Router.back()},t.e3=function(e){t.hasAuth=!0},t.e4=function(e){return t.$Router.back()},t.e5=function(e){return t.$Router.back()}),t.$mp.data=Object.assign({},{$root:{a0:{},l0:o,g1:s,m0:n,m1:i,m2:a}})},i=[]}},[["1b80","common/runtime","common/vendor"]]]);