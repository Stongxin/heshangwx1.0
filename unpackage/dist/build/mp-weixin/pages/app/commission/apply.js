(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/app/commission/apply"],{"44af":function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=o(n("7ca3"));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i={components:{},data:function(){return{formList:[],formHeadImg:"",protocol:null,isFormEnd:!1,hasPostBtn:!1,errorType:["message"],labelStyle:{"font-size":"28rpx","font-weight":"500",color:"#333"},placeholderStyle:"font-size: 28rpx;color:#c4c4c4;",model:{},inputNumber:[{required:!0,message:"内容不能为空！",trigger:["change","blur"]}],inputImage:[{required:!0,message:"请上传图片",trigger:["change","blur"]}],rules:{},token:e.getStorageSync("sh_token")}},computed:{},onLoad:function(){this.getFrom()},methods:{uploadSuccess:function(e,t){this.model[t]=e[0].response.data.url},uploadRemove:function(e,t){this.model[t]=""},onAgreement:function(e){this.model.agreement=e.value},getFrom:function(){var e=this,t=this;t.$http("commission.form").then((function(n){1===n.code&&(t.protocol=n.data.apply_protocol,t.formList=n.data.apply_info,t.hasPostBtn=n.data.apply_status,t.formHeadImg=n.data.background_image?n.data.background_image:e.$IMG_URL+"/imgs/commission/apply_bg.png",t.initRules(),t.$refs.uForm.setRules(t.rules))}))},initRules:function(){var e=this;e.formList.forEach((function(t,n){if(e.model=a(a({},e.model),(0,u.default)({},"value".concat(n),t.value?t.value:null)),e.model.agreement=!1,"input"!==t.type&&"number"!==t.type||(e.rules=a(a({},e.rules),(0,u.default)({},"value".concat(n),e.inputNumber))),"image"===t.type){if(t.value){var o=[];o.push({url:t.value}),e.model=a(a({},e.model),(0,u.default)({},"valueList".concat(n),o))}e.rules=a(a({},e.rules),(0,u.default)({},"value".concat(n),e.inputImage))}}))},applyCommission:function(t){var n=this;n.isFormEnd=!0,n.$http("commission.apply",{data:t},"申请中...").then((function(t){n.isFormEnd=!1,1===t.code&&e.showToast({title:t.msg,success:function(){n.$Router.back()}})}))},onSubmit:function(){var e=this,t=this;this.$refs.uForm.validate((function(n){if(n){if(!e.model.agreement&&e.protocol)return e.$u.toast("请勾选协议");var o=e.formList;o.map((function(e,n){e.value=t.model["value".concat(n)]})),e.applyCommission(o)}else e.$u.toast("请完善表单")}))}}};t.default=i}).call(this,n("df3c")["default"])},"4e2a":function(e,t,n){"use strict";var o=n("a833"),u=n.n(o);u.a},"9ee7":function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("7ea0");o(n("3240"));var u=o(n("f5a7"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(u.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},a833:function(e,t,n){},cb5f:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var o={shoproNavbar:function(){return n.e("components/shopro-navbar/shopro-navbar").then(n.bind(null,"9733"))},uForm:function(){return n.e("node-modules/uview-ui/components/u-form/u-form").then(n.bind(null,"91c9"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"3f82"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"0576"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"46f9"))},uCheckbox:function(){return n.e("node-modules/uview-ui/components/u-checkbox/u-checkbox").then(n.bind(null,"c24b"))}},u=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){return e.$Router.push({path:"/pages/public/richtext",query:{id:e.protocol.richtext_id}})}),e.$mp.data=Object.assign({},{$root:{a0:{}}})},r=[]},ee32:function(e,t,n){"use strict";n.r(t);var o=n("44af"),u=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=u.a},f5a7:function(e,t,n){"use strict";n.r(t);var o=n("cb5f"),u=n("ee32");for(var r in u)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(r);n("4e2a");var a=n("828b"),i=Object(a["a"])(u["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=i.exports}},[["9ee7","common/runtime","common/vendor"]]]);