(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/app/merchant/apply"],{"083b":function(e,t,o){"use strict";(function(e,t){var n=o("47a9");o("7ea0");n(o("3240"));var i=n(o("0aaa"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(i.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},"0aaa":function(e,t,o){"use strict";o.r(t);var n=o("1d7f"),i=o("d45f");for(var c in i)["default"].indexOf(c)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(c);o("bd49");var r=o("828b"),a=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=a.exports},"1d7f":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return c})),o.d(t,"a",(function(){return n}));var n={shoproNavbar:function(){return o.e("components/shopro-navbar/shopro-navbar").then(o.bind(null,"9733"))},uForm:function(){return o.e("node-modules/uview-ui/components/u-form/u-form").then(o.bind(null,"91c9"))},uFormItem:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-form-item/u-form-item")]).then(o.bind(null,"3f82"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-input/u-input")]).then(o.bind(null,"0576"))},uUpload:function(){return Promise.all([o.e("common/vendor"),o.e("node-modules/uview-ui/components/u-upload/u-upload")]).then(o.bind(null,"46f9"))},uCheckbox:function(){return o.e("node-modules/uview-ui/components/u-checkbox/u-checkbox").then(o.bind(null,"c24b"))},uSelect:function(){return o.e("node-modules/uview-ui/components/u-select/u-select").then(o.bind(null,"3d19"))},uPopup:function(){return o.e("node-modules/uview-ui/components/u-popup/u-popup").then(o.bind(null,"e07b"))}},i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){return e.$Router.back()}),e.$mp.data=Object.assign({},{$root:{a0:{}}})},c=[]},"1e15":function(e,t,o){"use strict";(function(e){var n=o("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o("7eb4")),c=n(o("34cf")),r=n(o("ee10")),a=n(o("7ca3")),s=n(o("a25c")),u=o("8f59"),l=o("e703");function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){(0,a.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var m={components:{},data:function(){var t=this;return{showNotice:!1,showWeeksModal:!1,isFormEnd:!1,weekcheckbox:[{value:"1",name:"周一",checked:!1},{value:"2",name:"周二",checked:!1},{value:"3",name:"周三",checked:!1},{value:"4",name:"周四",checked:!1},{value:"5",name:"周五",checked:!1},{value:"6",name:"周六",checked:!1},{value:"7",name:"周日",checked:!1}],authNotice:{},errorType:["message"],selectShow:!1,selectMode:"mutil-column",selectType:"",selectList:[],labelStyle:{"font-size":"28rpx","font-weight":"500",color:"#333"},placeholderStyle:"font-size: 28rpx;color:#c4c4c4;",model:{name:"",phone:"",realname:"",openhours:"",openweeks:"",weeks:"",area:"",area_id:"",address:"",latitude:"",longitude:"",images:[],images_original:[],fileImages:[],agreement:!1},rules:{name:[{required:!0,message:"请输入门店名称",trigger:["change","blur"]}],realname:[{required:!0,message:"请输入真实姓名",trigger:["change","blur"]}],area:[{required:!0,message:"请定位所在地区",trigger:["change","blur"]}],phone:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:function(e,o,n){return t.$u.test.mobile(o)},message:"手机号码不正确",trigger:["change","blur"]}],openhours:[{required:!0,message:"请选择营业时间",trigger:["change","blur"]}],weeks:[{required:!0,message:"请选择营业天数",trigger:["change","blur"]}],address:[{required:!0,message:"请输入详细地址",trigger:["change","blur"]}]},token:e.getStorageSync("sh_token")}},computed:h(h({},(0,u.mapGetters)(["initStore"])),{},{selectWorkerTime:function(){for(var e=[],t=0;t<=24;t++){var o=String(t).padStart(2,"0");e.push({value:"".concat(o,":00"),label:"".concat(o,":00")},{value:"".concat(o,":30"),label:"".concat(o,":30")})}return e.pop(),[e,e]}}),onLoad:function(){this.getStoreInfo()},onReady:function(){this.$refs.uForm.setRules(this.rules)},methods:{saveWeekModal:function(){this.showWeeksModal=!1;var e=[],t=[];this.weekcheckbox.forEach((function(o){o.checked&&(e.push(o.value),t.push(o.name))})),this.model.openweeks=e.join(","),this.model.weeks=t.join(",")},onSelectWeek:function(e){this.weekcheckbox[e].checked=!this.weekcheckbox[e].checked},onAuthBtn:function(e){e&&this.$Router.push({path:e}),this.showNotice=!1},uploadSuccess:function(e,t){var o=this;switch(t){case"storeImg":this.model.images=[],e.forEach((function(e){o.model.images.push(e.response.data.url)}));break;default:return}},uploadRemove:function(e,t){switch(t){case"storeImg":this.model.images.splice(e,1);break;default:return}},chooseLocation:function(){var t=this;return(0,r.default)(i.default.mark((function o(){var n;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,new s.default("userLocation").check();case 2:n=o.sent,n&&e.chooseLocation({success:function(e){t.model.latitude=e.latitude,t.model.longitude=e.longitude,t.getLocationInfo()},fail:function(e){console.log(e)}});case 4:case"end":return o.stop()}}),o)})))()},getLocationInfo:function(){var t=this;return(0,r.default)(i.default.mark((function o(){var n,r,a,s;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.chooseAddress="定位中...",o.next=3,e.request({url:"https://restapi.amap.com/v3/geocode/regeo?location=".concat(t.model.longitude,",").concat(t.model.latitude,"&key=").concat(l.MAP_KEY)});case 3:n=o.sent,r=(0,c.default)(n,2),r[0],a=r[1],"1"===a.data.status?(s=a.data.regeocode.addressComponent,t.model.area_id=s.adcode,t.model.area="".concat(s.province,"-").concat(s.city.length?s.city:s.province,"-").concat(s.district.length?s.district:s.township),t.model.address=a.data.regeocode.formatted_address.replace("".concat(s.province).concat(s.city).concat(s.district),"")):console.log("%c逆地址解析失败，请检查是否在env中配置地图key","color:green;background:yellow");case 8:case"end":return o.stop()}}),o)})))()},onSelect:function(e){switch(this.selectType=e,e){case"time":this.selectShow=!0,this.selectMode="mutil-column",this.selectList=this.selectWorkerTime;break;case"week":this.showWeeksModal=!0;break;default:return}},selectConfirm:function(e){var t=this;switch(this.selectType){case"time":this.model.openhours="",e.map((function(e,o){t.model.openhours+=""==t.model.openhours?e.label:" - "+e.label}));break;default:return}},onAgreement:function(e){this.model.agreement=e.value},getStoreInfo:function(){var e=this;this.$http("store.shopInfo").then((function(t){1===t.code&&t.data&&e.authStatus(t.data)}))},toProtocol:function(){this.initStore.protocol&&this.jump("/pages/public/richtext",{id:this.initStore.protocol})},initModel:function(){var e=this,t=this.model.openweeks.split(","),o=[];this.weekcheckbox.forEach((function(e){t.includes(e.value)&&(o.push(e.name),e.checked=!0)})),this.model.weeks=o.join(","),this.model.province_name&&(this.model.area="".concat(this.model.province_name,"-").concat(this.model.city_name,"-").concat(this.model.area_name)),this.model.images&&this.model.images.forEach((function(t){e.model.fileImages.push({url:t})})),this.$set(this.model,"agreement",!1)},authStatus:function(e){switch(String(e.status)){case"0":this.showNotice=!0,this.model=h(h({},this.model),e),this.initModel(),this.authNotice={img:this.$IMG_URL+"/imgs/commission/auth_check.png",title:"正在审核中",detail:e.status_msg,btnText:"修改信息",btnPath:""};break;case"-1":this.showNotice=!0,this.model=h(h({},this.model),e),this.initModel(),this.authNotice={img:this.$IMG_URL+"/imgs/commission/auth_reject.png",title:"您的申请已被驳回！",detail:e.status_msg,btnText:"重新申请",btnPath:""};break;case"1":this.showNotice=!1;break;default:}},applyStore:function(){var t=this,o=this;this.isFormEnd=!1,o.$http("store.apply",o.model,"提交中...").then((function(n){t.isFormEnd=!0,1===n.code&&(t.$store.commit("subscribeMessage","storeApply"),e.showToast({title:n.msg,success:function(){o.$Router.back()}}))}))},onSubmit:function(){var e=this;this.model.images.length?this.$refs.uForm.validate((function(t){if(t){if(!e.model.agreement)return e.$u.toast("请勾选协议");e.applyStore()}else e.$u.toast("请完善表单")})):this.$u.toast("请上传门店图片")},jump:function(e,t){this.$Router.push({path:e,query:t})}}};t.default=m}).call(this,o("df3c")["default"])},"53c6":function(e,t,o){},bd49:function(e,t,o){"use strict";var n=o("53c6"),i=o.n(n);i.a},d45f:function(e,t,o){"use strict";o.r(t);var n=o("1e15"),i=o.n(n);for(var c in n)["default"].indexOf(c)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(c);t["default"]=i.a}},[["083b","common/runtime","common/vendor"]]]);