(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/app/merchant/index"],{"5f7c":function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("7eb4")),a=r(n("af34")),s=r(n("ee10")),u=(n("8f59"),r(n("a25c"))),i={components:{},data:function(){return{isEmpty:!1,showModal:!1,filter1:"today",filter1Value:0,filter1Label:"今日",filterList1:[{label:"今日",value:0,parmas:"today"},{label:"昨日",value:1,parmas:"yesterday"},{label:"本周",value:2,parmas:"week"},{label:"本月",value:3,parmas:"month"},{label:"自定义",value:4,parmas:"custom"}],filter2:"all",filter2Value:0,filter2Label:"全部",filterList2:[{label:"全部",value:0,parmas:"all"},{label:"待发货",value:1,parmas:"nosend"},{label:"待完成",value:2,parmas:"noget"},{label:"已完成",value:3,parmas:"finish"}],custom:[],storeOrderList:[],orderInfo:{},storeDetail:{},cancelType:"",scanCodes:"",showInputModal:!1,qrcode:"",showCalendar:!1,loadStatus:"loadmore",currentPage:1,lastPage:1}},computed:{},onLoad:function(t){t&&t.storeId&&e.setStorageSync("storeId",t.storeId),this.getStoreDetail()},onShow:function(){this.currentPage=1,this.lastPage=1,this.storeOrderList=[],this.getStoreOrder()},onPullDownRefresh:function(){this.currentPage=1,this.lastPage=1,this.storeOrderList=[],this.getStoreOrder()},onReachBottom:function(){this.currentPage<this.lastPage&&(this.currentPage+=1,this.getStoreOrder())},methods:{jump:function(e,t){this.$Router.push({path:e,query:t})},reduceAdd:function(e,t){return e.reduce((function(e,n){return e+Number(n[t])}),0)},changeFilter1:function(e){4===e?this.showCalendar=!0:(this.filter1=this.filterList1[e].parmas,this.filter1Label=this.filterList1[e].label,this.onFilter())},changeFilter2:function(e){this.filter2=this.filterList2[e].parmas,this.filter2Label=this.filterList2[e].label,this.onFilter()},goStoreList:function(){this.$Router.replace({path:"/pages/app/merchant/list"})},getStoreDetail:function(){var t=this;t.$http("store.info",{store_id:e.getStorageSync("storeId")}).then((function(n){1===n.code?t.storeDetail=n.data:(e.removeStorageSync("storeId"),t.showModal=!0)}))},scanCode:function(){var t=this;return(0,s.default)(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$platform.get(),n.next=3,new u.default("camera").check();case 3:r=n.sent,r&&e.scanCode({success:function(e){t.scanCodes=e.result,t.postOrderConfirm()},fail:function(e){console.log(e)}});case 5:case"end":return n.stop()}}),n)})))()},onConfirm:function(){this.showInputModal=!1,this.scanCodes=this.qrcode,this.postOrderConfirm()},postOrderConfirm:function(){var t=this;t.$http("store.orderConfirm",{codes:t.scanCodes,store_id:e.getStorageSync("storeId")},"核销中...").then((function(n){e.vibrateLong({success:function(){t.$u.toast(n.msg)}}),1===n.code&&(t.$u.toast(n.msg),t.scanCodes="",t.storeOrderList=[],t.qrcode="",t.getStoreOrder())}))},getStoreOrder:function(){var t=this;t.loadStatus="loading",t.$http("store.order",{date_type:t.filter1,date:t.custom,type:t.filter2,page:t.currentPage,store_id:e.getStorageSync("storeId")},"加载中...").then((function(n){e.stopPullDownRefresh(),1==n.code&&(t.storeOrderList=[].concat((0,a.default)(t.storeOrderList),(0,a.default)(n.data.result.data)),t.isEmpty=!t.storeOrderList.length,t.orderInfo=n.data,t.lastPage=n.data.result.last_page,t.loadStatus=t.currentPage<n.data.result.last_page?"loadmore":"nomore")}))},selDate:function(e){this.custom=[],this.custom.push(e.startDate),this.custom.push(e.endDate),this.isShowDropDown=!1,this.filter1Label="".concat(e.startDate.replace(/-/g,":"),"-").concat(e.endDate.replace(/-/g,":")),this.onFilter()},onFilter:function(e,t){this.storeOrderList=[],this.currentPage=1,this.getStoreOrder()}}};t.default=i}).call(this,n("df3c")["default"])},b909:function(e,t,n){},be67:function(e,t,n){"use strict";n.r(t);var r=n("5f7c"),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},ccdf:function(e,t,n){"use strict";n.r(t);var r=n("f7e6"),o=n("be67");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("d33d");var s=n("828b"),u=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=u.exports},d33d:function(e,t,n){"use strict";var r=n("b909"),o=n.n(r);o.a},dea0:function(e,t,n){"use strict";(function(e,t){var r=n("47a9");n("7ea0");r(n("3240"));var o=r(n("ccdf"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},f7e6:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={shoproNavbar:function(){return n.e("components/shopro-navbar/shopro-navbar").then(n.bind(null,"9733"))},uDropdown:function(){return n.e("node-modules/uview-ui/components/u-dropdown/u-dropdown").then(n.bind(null,"5f00"))},uDropdownItem:function(){return n.e("node-modules/uview-ui/components/u-dropdown-item/u-dropdown-item").then(n.bind(null,"2744"))},shoproMiniCard:function(){return n.e("components/shopro-mini-card/shopro-mini-card").then(n.bind(null,"b3a4"))},uEmpty:function(){return n.e("node-modules/uview-ui/components/u-empty/u-empty").then(n.bind(null,"e181"))},uLoadmore:function(){return n.e("node-modules/uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"417c"))},uCalendar:function(){return n.e("node-modules/uview-ui/components/u-calendar/u-calendar").then(n.bind(null,"c182"))},uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"e07b"))},uModal:function(){return n.e("node-modules/uview-ui/components/u-modal/u-modal").then(n.bind(null,"8970"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,{background:"url("+e.$IMG_URL+"/imgs/user/shop_headbg.png) no-repeat top center / 100% auto"}),r=e.__map(e.storeOrderList,(function(t,n){var r=e.__get_orig(t),o=e.reduceAdd(t.item,"discount_fee"),a=o?e.reduceAdd(t.item,"discount_fee"):null,s=e.reduceAdd(t.item,"pay_price");return{$orig:r,m0:o,m1:a,m2:s}})),o=e.storeOrderList.length;e._isMounted||(e.e0=function(t){return e.$Router.pushTab("/pages/index/user")},e.e1=function(t){e.showInputModal=!0},e.e2=function(t){return e.$Router.back()}),e.$mp.data=Object.assign({},{$root:{a0:n,l0:r,g0:o}})},a=[]}},[["dea0","common/runtime","common/vendor"]]]);