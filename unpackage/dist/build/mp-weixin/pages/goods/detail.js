(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/detail"],{"0c38":function(t,o,e){"use strict";(function(t,n){var s=e("47a9");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=s(e("7eb4")),r=s(e("ee10")),u=s(e("7ca3")),a=s(e("3ad2")),c=e("8f59");function d(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?d(Object(e),!0).forEach((function(o){(0,u.default)(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}var h=t.getSystemInfoSync(),f={components:{shServe:function(){e.e("pages/goods/components/sh-serve").then(function(){return resolve(e("7ce7"))}.bind(null,e)).catch(e.oe)},shPriceCard:function(){e.e("pages/goods/components/sh-price-card").then(function(){return resolve(e("5f6d"))}.bind(null,e)).catch(e.oe)},shGroupon:function(){e.e("pages/goods/components/sh-groupon").then(function(){return resolve(e("20fa"))}.bind(null,e)).catch(e.oe)},shCoupon:function(){e.e("pages/goods/components/sh-coupon").then(function(){return resolve(e("2b7c"))}.bind(null,e)).catch(e.oe)},shComment:function(){e.e("pages/goods/components/sh-comment").then(function(){return resolve(e("0a36"))}.bind(null,e)).catch(e.oe)},shActivity:function(){e.e("pages/goods/components/sh-activity").then(function(){return resolve(e("99dd"))}.bind(null,e)).catch(e.oe)}},data:function(){return{backIconName:"arrow-left",showSku:!1,currentSkuText:"",detailType:"",showShare:!1,buyType:"sku",grouponBuyType:"alone",showEmpty:!1,showEmptyText:"",showServe:!1,goodsInfo:{},commentList:[],commentNum:0,favorite:!1,activityRules:{},currentSkuList:[],confirmGoodsInfo:{},swiperCurrent:0,tabCurrent:"tab0",tabList:[{id:"tab0",title:"商品详情"},{id:"tab1",title:"规格参数"},{id:"tab2",title:"用户评价"}]}},computed:l(l({},(0,c.mapGetters)(["isLogin","authType"])),{},{navbarHeight:function(){var t="ios"==h.platform?44:48;return t}}),onLoad:function(){var t=this;return(0,r.default)(i.default.mark((function o(){var e;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:t,t.backIconName=getCurrentPages().length>1?"arrow-left":"home-fill",e=t.$Route.query.type,t.detailType=e,o.t0=e,o.next="score"===o.t0?7:10;break;case 7:return o.next=9,t.getScoreDetail();case 9:return o.abrupt("break",12);case 10:return o.next=12,t.getGoodsDetail();case 12:case"end":return o.stop()}}),o)})))()},onUnload:function(){a.default.setShareInfo()},methods:{goBack:function(){var t=getCurrentPages();t.length>1?n.navigateBack():this.$Router.replaceAll("/pages/index/index")},onGoodsSwiper:function(t){this.$tools.previewImage(this.goodsInfo.images,t)},getActivityRules:function(t){t&&(this.activityRules=JSON.parse(t))},checkActivity:function(t,o){return!t||!t.includes(o)},jump:function(t,o){this.showShare=!1,this.$Router.push({path:t,query:o})},goHome:function(){this.$Router.replaceAll("/pages/index/index")},onTab:function(t){this.tabCurrent=t},getScoreDetail:function(){var t=this;return new Promise((function(o,e){t.$http("goods.scoreDetail",{id:t.$Route.query.id}).then((function(e){1===e.code&&(t.goodsInfo=e.data,o(e.data)),0==e.code&&(o(!1),t.$u.toast(e.msg))}))}))},getGoodsDetail:function(){var t=this;return new Promise((function(o,e){t.$http("goods.detail",{id:t.$Route.query.id},"",!1).then((function(e){1===e.code?(t.showEmpty=!1,t.goodsInfo=e.data,t.goodsInfo.activity_type&&(t.activityRules.status=t.goodsInfo.activity.status_code),a.default.setShareInfo({title:t.goodsInfo.title,desc:t.goodsInfo.subtitle,image:t.goodsInfo.image,params:{page:2,pageId:t.$Route.query.id}}),t.getCommentList(),o(e.data)):(o(!1),t.showEmpty=!0,t.showEmptyText=e.msg)}))}))},getCommentList:function(){var t=this;t.$http("goods.commentList",{goods_id:t.goodsInfo.id,per_page:3,type:"all"}).then((function(o){1===o.code&&(t.commentList=o.data.data,t.commentNum=o.data.total)}))},changeType:function(t){this.buyType=t},getSkuText:function(t){this.currentSkuText=t},onShare:function(){this.showShare=!0},addCart:function(){this.isLogin?(this.buyType="cart",this.showSku=!0):this.$store.dispatch("showAuthModal")},goPay:function(){this.isLogin?(this.buyType="buy",this.showSku=!0):this.$store.dispatch("showAuthModal")},payGroupon:function(t){this.isLogin?(this.grouponBuyType="groupon"===t?"groupon":"alone",this.buyType="buy",this.showSku=!0):this.$store.dispatch("showAuthModal")},goSeckill:function(){this.isLogin?this.showSku=!0:this.$store.dispatch("showAuthModal"),this.buyType="buy"},onFavorite:function(t){var o=this;o.$http("goods.favorite",{goods_id:t}).then((function(t){1===t.code&&(o.goodsInfo.favorite=t.data,o.$u.toast(t.msg))}))}}};o.default=f}).call(this,e("df3c")["default"],e("3223")["default"])},2446:function(t,o,e){"use strict";e.r(o);var n=e("f5a5"),s=e("a93e");for(var i in s)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return s[t]}))}(i);e("9406");var r=e("828b"),u=Object(r["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);o["default"]=u.exports},6678:function(t,o,e){},9406:function(t,o,e){"use strict";var n=e("6678"),s=e.n(n);s.a},a93e:function(t,o,e){"use strict";e.r(o);var n=e("0c38"),s=e.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){e.d(o,t,(function(){return n[t]}))}(i);o["default"]=s.a},c937:function(t,o,e){"use strict";(function(t,o){var n=e("47a9");e("7ea0");n(e("3240"));var s=n(e("2446"));t.__webpack_require_UNI_MP_PLUGIN__=e,o(s.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},f5a5:function(t,o,e){"use strict";e.d(o,"b",(function(){return s})),e.d(o,"c",(function(){return i})),e.d(o,"a",(function(){return n}));var n={shoproEmpty:function(){return e.e("components/shopro-empty/shopro-empty").then(e.bind(null,"2400"))},uSwiper:function(){return e.e("node-modules/uview-ui/components/u-swiper/u-swiper").then(e.bind(null,"7ed7"))},uParse:function(){return Promise.all([e.e("common/vendor"),e.e("node-modules/uview-ui/components/u-parse/u-parse")]).then(e.bind(null,"bc80"))},shoproSku:function(){return e.e("components/shopro-sku/shopro-sku").then(e.bind(null,"a1bf"))},shoproShare:function(){return Promise.all([e.e("common/vendor"),e.e("components/shopro-share/shopro-share")]).then(e.bind(null,"002b"))},shoproAuthModal:function(){return Promise.all([e.e("common/vendor"),e.e("components/shopro-auth-modal/shopro-auth-modal")]).then(e.bind(null,"326e"))}},s=function(){var t=this,o=t.$createElement,e=(t._self._c,t.showEmpty?null:t.goodsInfo.activity_discounts_tags&&t.goodsInfo.activity_discounts_tags.length),n=t.showEmpty?null:"waiting"!==t.activityRules.status&&t.checkActivity(t.goodsInfo.activity_type,"groupon")&&t.goodsInfo.is_sku,s=t.showEmpty?null:t.goodsInfo.service&&t.goodsInfo.service.length,i=t.showEmpty?null:t.goodsInfo.coupons&&t.goodsInfo.coupons.length&&"seckill"!==t.goodsInfo.activity_type&&"groupon"!==t.goodsInfo.activity_type&&"score"!==t.detailType,r=t.showEmpty?null:t.goodsInfo.activity&&Number(t.goodsInfo.activity.richtext_id)&&"seckill"!==t.goodsInfo.activity_type,u=t.showEmpty||"tab1"!==t.tabCurrent?null:t.goodsInfo.params&&t.goodsInfo.params.length,a=t.showEmpty||"tab2"!==t.tabCurrent?null:t.commentList.length,c=!t.showEmpty&&t.goodsInfo.id&&"score"!==t.detailType?Boolean(t.goodsInfo.favorite):null;t._isMounted||(t.e0=function(o){return t.$Router.back()},t.e1=function(o){t.showSku=!0}),t.$mp.data=Object.assign({},{$root:{g0:e,m0:n,g1:s,g2:i,m1:r,g3:u,g4:a,m2:c}})},i=[]}},[["c937","common/runtime","common/vendor"]]]);